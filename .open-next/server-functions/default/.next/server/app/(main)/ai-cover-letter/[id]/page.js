(()=>{var e={};e.id=995,e.ids=[995],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},60483:e=>{"use strict";e.exports=require("@prisma/client/scripts/default-index.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},77598:e=>{"use strict";e.exports=require("node:crypto")},73024:e=>{"use strict";e.exports=require("node:fs")},76760:e=>{"use strict";e.exports=require("node:path")},1708:e=>{"use strict";e.exports=require("node:process")},73136:e=>{"use strict";e.exports=require("node:url")},5465:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c});var s=t(70260),n=t(28203),i=t(25155),a=t.n(i),o=t(67292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let c=["",{children:["(main)",{children:["ai-cover-letter",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,41223)),"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/(main)/ai-cover-letter/[id]/page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32546)),"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/(main)/layout.jsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e),async e=>(await Promise.resolve().then(t.bind(t,2987))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,37928)),"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,58255)),"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/not-found.jsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e),async e=>(await Promise.resolve().then(t.bind(t,2987))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/home/rumsan/Documents/Rumsan/JobGeniusAI/app/(main)/ai-cover-letter/[id]/page.jsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(main)/ai-cover-letter/[id]/page",pathname:"/ai-cover-letter/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},99261:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"00ade993f8c188dec2c077c9c3410e8602b3b8d05d":()=>n.TQ,"408ac578a59a88734d7131ff1b127bb9bf1f50de26":()=>n.t4,"40c1e026f44bf89c1e925db2b3953c51532d6d7b8a":()=>n.PR,"40e455bd141cb42c6cf4d4ad9b00fda455ebd18d3a":()=>n.sM,"7f1e6457e0b9c3de3bfee4dcd740d4068a93daf204":()=>s.ai,"7f7be3b289140148808a2f2bb348375452fe438314":()=>s.ot,"7fcb0f3069d5611ec4359c56736324bfd0d39dca6a":()=>s.at});var s=t(50218),n=t(97091)},55973:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"7fbdda164a0ee6b8c5b652b3b1a4170c78f7d7a912":()=>s.y});var s=t(98090)},20723:(e,r,t)=>{Promise.resolve().then(t.bind(t,42055)),Promise.resolve().then(t.t.bind(t,59607,23))},57675:(e,r,t)=>{Promise.resolve().then(t.bind(t,4747)),Promise.resolve().then(t.t.bind(t,28531,23))},96487:()=>{},78335:()=>{},4747:(e,r,t)=>{"use strict";t.d(r,{default:()=>i});var s=t(45512);t(58009);var n=t(5570);let i=({content:e})=>(0,s.jsx)("div",{className:"py-4",children:(0,s.jsx)(n.Ay,{value:e,preview:"preview",height:700})})},97091:(e,r,t)=>{"use strict";t.d(r,{PR:()=>p,TQ:()=>l,sM:()=>u,t4:()=>c});var s=t(88977);t(98063);var n=t(91933),i=t(19561),a=t(36858),o=t(56215);let d=new a.ij(process.env.GEMINI_API_KEY).getGenerativeModel({model:"gemini-1.5-flash"});async function c(e){let{userId:r}=await (0,i.j)();if(!r)throw Error("Unauthorized");let t=await n.db.user.findUnique({where:{clerkUserId:r}});if(!t)throw Error("User not found");let s=`
    Write a professional cover letter for a ${e.jobTitle} position at ${e.companyName}.
    
    About the candidate:
    - Industry: ${t.industry}
    - Years of Experience: ${t.experience}
    - Skills: ${t.skills?.join(", ")}
    - Professional Background: ${t.bio}
    
    Job Description:
    ${e.jobDescription}
    
    Requirements:
    1. Use a professional, enthusiastic tone
    2. Highlight relevant skills and experience
    3. Show understanding of the company's needs
    4. Keep it concise (max 400 words)
    5. Use proper business letter formatting in markdown
    6. Include specific examples of achievements
    7. Relate candidate's background to job requirements
    
    Format the letter in markdown.
  `;try{let r=(await d.generateContent(s)).response.text().trim();return await n.db.coverLetter.create({data:{content:r,jobDescription:e.jobDescription,companyName:e.companyName,jobTitle:e.jobTitle,status:"completed",userId:t.id}})}catch(e){throw console.error("Error generating cover letter:",e.message),Error("Failed to generate cover letter")}}async function l(){let{userId:e}=await (0,i.j)();if(!e)throw Error("Unauthorized");let r=await n.db.user.findUnique({where:{clerkUserId:e}});if(!r)throw Error("User not found");return await n.db.coverLetter.findMany({where:{userId:r.id},orderBy:{createdAt:"desc"}})}async function u(e){let{userId:r}=await (0,i.j)();if(!r)throw Error("Unauthorized");let t=await n.db.user.findUnique({where:{clerkUserId:r}});if(!t)throw Error("User not found");return await n.db.coverLetter.findUnique({where:{id:e,userId:t.id}})}async function p(e){let{userId:r}=await (0,i.j)();if(!r)throw Error("Unauthorized");let t=await n.db.user.findUnique({where:{clerkUserId:r}});if(!t)throw Error("User not found");return await n.db.coverLetter.delete({where:{id:e,userId:t.id}})}(0,o.D)([c,l,u,p]),(0,s.A)(c,"408ac578a59a88734d7131ff1b127bb9bf1f50de26",null),(0,s.A)(l,"00ade993f8c188dec2c077c9c3410e8602b3b8d05d",null),(0,s.A)(u,"40e455bd141cb42c6cf4d4ad9b00fda455ebd18d3a",null),(0,s.A)(p,"40c1e026f44bf89c1e925db2b3953c51532d6d7b8a",null)},41223:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(62740),n=t(59607),i=t.n(n),a=t(14030),o=t(56399),d=t(97091),c=t(42055);async function l({params:e}){let{id:r}=await e,t=await (0,d.sM)(r);return(0,s.jsxs)("div",{className:"container mx-auto py-6",children:[(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(i(),{href:"/ai-cover-letter",children:(0,s.jsxs)(o.$,{variant:"link",className:"gap-2 pl-0",children:[(0,s.jsx)(a.A,{className:"h-4 w-4"}),"Back to Cover Letters"]})}),(0,s.jsxs)("h1",{className:"text-6xl font-bold gradient-title mb-6",children:[t?.jobTitle," at ",t?.companyName]})]}),(0,s.jsx)(c.default,{content:t?.content})]})}},42055:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/(main)/ai-cover-letter/_components/cover-letter-preview.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/rumsan/Documents/Rumsan/JobGeniusAI/app/(main)/ai-cover-letter/_components/cover-letter-preview.jsx","default")},32546:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(62740);t(76301);let n=({children:e})=>(0,s.jsx)("div",{className:"container mx-auto mt-24 mb-20",children:e})},14030:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(56976).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[994,187,629,858,570,802],()=>t(5465));module.exports=s})();